---
layout: pgs
---

<div class="exhibit">
  <!-- Блок характеристик в виде аккуратной таблицы -->
  <div class="specs">
    <div class="specs-grid">
      <div class="spec-name">Модель:</div>
      <div class="spec-value">{{ page.model }}</div>
      
      <div class="spec-name">Тип:</div>
      <div class="spec-value">{{ page.category }}</div>
      
      <div class="spec-name">Дата выпуска:</div>
      <div class="spec-value">{{ page.prodyear }}</div>
      
      {% if page.modelyears %}
      <div class="spec-name">Годы выпуска модели:</div>
      <div class="spec-value">{{ page.modelyears }}</div>
      {% endif %}
      
      {% if page.serial %}
      <div class="spec-name">Серийный номер:</div>
      <div class="spec-value">{{ page.serial }}</div>
      {% endif %}
      
      {% if page.manufacturer %}
      <div class="spec-name">Производитель:</div>
      <div class="spec-value">{{ page.manufacturer }}</div>
      {% endif %}
      
      {% if page.country %}
      <div class="spec-name">Страна:</div>
      <div class="spec-value">{{ page.country }}</div>
      {% endif %}
      
      {% if page.price %}
      <div class="spec-name">Цена:</div>
      <div class="spec-value">{{ page.price }}</div>
      {% endif %}
      
      {% if page.condition %}
      <div class="spec-name">Состояние:</div>
      <div class="spec-value">{{ page.condition }}</div>
      {% endif %}
      
      <!-- Статус коллекции с возможным выделением -->
      <div class="spec-name">Статус:</div>
      <div class="spec-value">
        {% assign status = page.collectionstatus | default: "" | upcase %}
        {% if status contains "ПОИСК" or status contains "ИЩУ" %}
          <span class="status-seek">{{ page.collectionstatus }}</span>
        {% else %}
          {{ page.collectionstatus }}
        {% endif %}
      </div>
      
      {% if page.innernumber %}
      <div class="spec-name">Внутренний номер:</div>
      <div class="spec-value">{{ page.innernumber }}</div>
      {% endif %}
      
      {% if page.acquired_date %}
      <div class="spec-name">Дата приобретения:</div>
      <div class="spec-value">{{ page.acquired_date }}</div>
      {% endif %}
      
      {% if page.complect %}
      <div class="spec-name">Комплектность:</div>
      <div class="spec-value">{{ page.complect }}</div>
      {% endif %}
      
      {% if page.cpu %}
      <div class="spec-name">Процессор:</div>
      <div class="spec-value">{{ page.cpu }}</div>
      {% endif %}
      
      {% if page.ram %}
      <div class="spec-name">Память:</div>
      <div class="spec-value">{{ page.ram }}</div>
      {% endif %}
      
      {% if page.mp %}
      <div class="spec-name">Основная статья:</div>
      <div class="spec-value">
        <a href="{{ page.mp }}">{{ page.model }}</a>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Описание экспоната -->
  <div class="description">
    <div align="justify">
      {{ content }}
    </div>
  </div>

  <!-- Таблица с фотографиями -->

  <table class="photo-table">
  {% comment %} Определяем массив суффиксов для цикла {% endcomment %}
  {% assign suffixes = "0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F" | split: "," %}
  
  {% comment %} Проходим по всем возможным суффиксам {% endcomment %}
  {% for suffix in suffixes %}
    {% comment %} Формируем имена переменных для каждой фотографии {% endcomment %}
    {% assign photo_var = "photo" | append: suffix %}
    {% assign text_var = "text" | append: suffix %}
    
    {% comment %} Проверяем, существует ли фото с таким номером {% endcomment %}
    {% if page[photo_var] %}
      {% comment === АВТОМАТИЧЕСКОЕ ИЗВЛЕЧЕНИЕ "ЯДРА" === %}
      {% comment %} 1. Берём значение переменной (например, page.photo0) {% endcomment %}
      {% assign full_url = page[photo_var] %}
      
      {% comment %} 2. Убираем начало URL до третьего слеша (домен) {% endcomment %}
      {% assign url_parts = full_url | split: "/" %}
      {% comment %} Берём часть пути, начиная с 3-го элемента (индекс 3 в Liquid) {% endcomment %}
      {% assign path_with_suffix = "" %}
      {% for part in url_parts %}
        {% if forloop.index >= 4 %} {% comment %} Пропускаем 'https:', '', 'images2.imgbox.com' {% endcomment %}
          {% assign path_with_suffix = path_with_suffix | append: part %}
          {% unless forloop.last %}
            {% assign path_with_suffix = path_with_suffix | append: "/" %}
          {% endunless %}
        {% endif %}
      {% endfor %}
      
      {% comment %} 3. Убираем суффикс _o, _b, _t и расширение .jpg {% endcomment %}
      {% assign base = path_with_suffix | split: "_" | first %}
      
      {% comment === ФОРМИРОВАНИЕ ССЫЛОК === %}
      {% assign thumb_domain = "https://thumbs2.imgbox.com/" %}
      {% assign image_domain = "https://images2.imgbox.com/" %}
      
      <tr>
        <td>
          {% comment %} Превью (_b), при клике открывается _t {% endcomment %}
          <a href="{{ thumb_domain }}{{ base }}_t.jpg" target="_blank" rel="noopener noreferrer">
            <img src="{{ thumb_domain }}{{ base }}_b.jpg" 
                 loading="lazy" 
                 alt="Фото экспоната: {{ page[text_var] | strip_html | truncatewords: 8 }}">
          </a>
        </td>
        <td>
          {% comment %} Текст, при клике открывается оригинал (_o) {% endcomment %}
          <a href="{{ image_domain }}{{ base }}_o.jpg" target="_blank" rel="noopener noreferrer">
            {{ page[text_var] }}
          </a>
        </td>
      </tr>
    {% endif %}
  {% endfor %}
</table>
  
</div>
