/* Ультра-адаптивная сетка с максимальным заполнением */
:root {
  --card-min-width: 280px;  /* Минимальная ширина карточки */
  --card-max-width: 400px;  /* Максимальная ширина карточки */
  --gap-size: 20px;         /* Расстояние между карточками */
}

/* Динамическая сетка с автоподбором колонок */
.exhibits-grid {
  display: grid;
  /* Автоматически подбирает количество колонок */
  grid-template-columns: repeat(auto-fit, minmax(var(--card-min-width), 1fr));
  gap: var(--gap-size);
  padding: 20px 0;
  
  /* Оптимизация производительности */
  will-change: transform;
  contain: layout style paint;
}

/* Улучшенные карточки */
.exhibit-card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Гарантируем, что карточки растягиваются равномерно */
  display: flex;
  flex-direction: column;
  height: 100%;
  max-width: var(--card-max-width);
  margin: 0 auto; /* Центрируем если мало карточек в строке */
}

/* Автоматическое растягивание карточек по высоте */
.exhibit-info {
  flex-grow: 1;
  padding: 20px;
}

/* МЕДИА-ЗАПРОСЫ для точной настройки на разных экранах */

/* Большие мониторы (4K и выше) */
@media screen and (min-width: 2560px) {
  .exhibits-grid {
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    --gap-size: 30px;
  }
}

/* Стандартные десктопы */
@media screen and (min-width: 1200px) {
  .exhibits-grid {
    /* Формула для точного расчета: (ширина_контейнера - (n-1)*gap) / n >= min-width */
    grid-template-columns: repeat(auto-fill, 
      minmax(max(var(--card-min-width), calc((100% - 3*var(--gap-size)) / 4)), 1fr));
  }
}

/* Ноутбуки и планшеты в горизонтальной ориентации */
@media screen and (min-width: 992px) and (max-width: 1199px) {
  .exhibits-grid {
    grid-template-columns: repeat(auto-fill, 
      minmax(max(var(--card-min-width), calc((100% - 2*var(--gap-size)) / 3)), 1fr));
  }
}

/* Планшеты */
@media screen and (min-width: 768px) and (max-width: 991px) {
  .exhibits-grid {
    --card-min-width: 250px;
    grid-template-columns: repeat(auto-fill, 
      minmax(max(var(--card-min-width), calc((100% - 1*var(--gap-size)) / 2)), 1fr));
  }
}

/* Большие телефоны */
@media screen and (min-width: 576px) and (max-width: 767px) {
  .exhibits-grid {
    --card-min-width: 240px;
    --gap-size: 15px;
    grid-template-columns: repeat(auto-fill, 
      minmax(max(var(--card-min-width), calc((100% - 1*var(--gap-size)) / 2)), 1fr));
  }
}

/* Мобильные телефоны */
@media screen and (max-width: 575px) {
  .exhibits-grid {
    --card-min-width: 280px; /* Одна карточка на всю ширину */
    --gap-size: 15px;
    grid-template-columns: 1fr; /* Всегда одна колонка на мобильных */
  }
  
  .exhibit-card {
    max-width: 100%; /* Занимает всю доступную ширину */
  }
}

/* Специальные случаи для очень широких экранов */
@media screen and (min-width: 1800px) {
  .exhibits-grid {
    grid-template-columns: repeat(auto-fill, 
      minmax(max(300px, calc((100% - 5*var(--gap-size)) / 6)), 1fr));
  }
}

/* Альтернативный подход с JavaScript (опционально) */
/* Добавляем классы для тонкой настройки */
.js-columns-1 .exhibits-grid { grid-template-columns: repeat(1, 1fr); }
.js-columns-2 .exhibits-grid { grid-template-columns: repeat(2, 1fr); }
.js-columns-3 .exhibits-grid { grid-template-columns: repeat(3, 1fr); }
.js-columns-4 .exhibits-grid { grid-template-columns: repeat(4, 1fr); }
.js-columns-5 .exhibits-grid { grid-template-columns: repeat(5, 1fr); }
.js-columns-6 .exhibits-grid { grid-template-columns: repeat(6, 1fr); }
